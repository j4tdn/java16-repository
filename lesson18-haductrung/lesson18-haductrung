CREATE DATABASE java16_class_test CHAR SET utf8mb4;
USE java16_class_test;

CREATE TABLE Class(
	id INT,
    name VARCHAR(200) NOT NULL,
    teacher_name VARCHAR(50) NOT NULL,
    CONSTRAINT PK_Class PRIMARY KEY (id)
);

CREATE TABLE Student(
	id INT,
    name VARCHAR(200) NOT NULL,
    gender VARCHAR(50) NOT NULL,
    class_id INT,
    CONSTRAINT PK_Student PRIMARY KEY (id),
    CONSTRAINT FK_Stdent_Class FOREIGN KEY(class_id) REFERENCES Class(id)
);


CREATE TABLE Result(
	student_id INT,
    subject VARCHAR(200) NOT NULL,
    score FLOAT,
    CONSTRAINT PK_Result PRIMARY KEY (student_id),
    CONSTRAINT FK_Result_Student FOREIGN KEY(student_id) REFERENCES Student(id)
);
INSERT INTO class(id,name,teacher) values(1,"12A","Ho Cong Tung "),
(2,"12B","Dang Tu Anh "),
(3,"12C","Nguyen Van Tam ");

INSERT INTO student(id,name,gender,class_id) values (1, "Dinh Thi Ngoc", "Female",2),
(2, "Nguyen Thanh Hung", "Female",1),
(3, "Tran Mai Hoa", "Male",2),
(4, "Doan Quan Vinh", "Female",1),
(5, "Cao Anh Dao", "Male",3),
(6, "TRan Kim Tuyen", "Female",3);

INSERT INTO result(student_id,subject, score) values (1,"Math",8),
(1,"Literature",9),
(2,"Literature",7),
(3,"History",5),
(4,"Math",8),
(5,"Literature",6),
(6,"History",9);



-- question 1
-- Primary key of result table is student_id and subject

-- question 2
SELECT st.name, st.gender, class.teacher
FROM student st
JOIN class
ON st.class_id = class.id;

-- question 3
SELECT class.teacher, count(*)
FROM student st
JOIN class
ON st.class_id = class.id
WHERE class.name LIKE "%12C%";
-- question 4
SELECT cl.name, count(st.id) FROM Student st 
		JOIN Result Rs 
        ON rs.student_id = st.id
        JOIN Class cl 
        ON cl.id = st.class_id
        WHERE  rs.subject like "MATH" AND rs.subject ="Literature" AND rs.socre >8;











